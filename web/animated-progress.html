<!doctype html>
<meta charset="utf-8" />
<title>Smooth Progress Demo</title>
<style>
  progress {
    --bg: #e6e6e6;
    --fg: #3c8fdf;
    --rad: 12px;
    --ht: 1rem;

    width: 100%;
    height: var(--ht);
    border-radius: var(--rad);
    overflow: hidden;

    &::-webkit-progress-bar {
      background: var(--bg);
    }
    &::-webkit-progress-value {
      background: var(--fg);
      border-radius: var(--rad);
      transition: width 0.6s ease;
    }
    &::-moz-progress-bar {
      background: var(--fg);
      border-radius: var(--rad);
    }

    &.-danger {
      --fg: #f56c6c;
    }
  }
</style>

<p>
  The progress looks the same in Chrome and Firefox, and it increases smoothly
  in Chrome when the value changes.
</p>
<progress max="100" value="0"></progress>
<progress class="-danger" max="100" value="0"></progress>

<script>
  const rand = (min, max) => min + Math.random() * (max - min);
  const wait = (ms) => new Promise((resolve) => setTimeout(resolve, ms));

  document.querySelectorAll("progress").forEach((bar) => {
    (async () => {
      while (true) {
        await wait(rand(400, 900));
        bar.value = Math.min(bar.max, bar.value + rand(5, 25));
        if (bar.value === bar.max) {
          await wait(600);
          bar.value = 0;
        }
      }
    })();
  });
</script>
